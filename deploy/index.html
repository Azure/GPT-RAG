
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Official project documentation">
      
      
        <meta name="author" content="Paulo Lacerda">
      
      
      
        <link rel="prev" href="../whatisnew/">
      
      
        <link rel="next" href="../quickstart_simple_rag/">
      
      
      <link rel="icon" href="../favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.34">
    
    
      
        <title>Deployment Guide - GPT-RAG</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.35f28582.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#deployment-guide" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="GPT-RAG" class="md-header__button md-logo" aria-label="GPT-RAG" data-md-component="logo">
      
  <img src="../media/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            GPT-RAG
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Deployment Guide
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/azure/gpt-rag" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="GPT-RAG" class="md-nav__button md-logo" aria-label="GPT-RAG" data-md-component="logo">
      
  <img src="../media/logo.png" alt="logo">

    </a>
    GPT-RAG
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/azure/gpt-rag" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../whatisnew/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    What's New
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Deployment Guide
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Deployment Guide
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basic-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Deployment
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#zero-trust-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      Zero Trust Deployment
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploy-gpt-rag-services" class="md-nav__link">
    <span class="md-ellipsis">
      Deploy GPT-RAG Services
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Deploy GPT-RAG Services">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deploy-individual-services" class="md-nav__link">
    <span class="md-ellipsis">
      Deploy Individual Services
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#permissions" class="md-nav__link">
    <span class="md-ellipsis">
      Permissions
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Quick Start Guides
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Quick Start Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quickstart_simple_rag/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Simple RAG
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quickstart_nl2sql/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NL2SQL
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Architecture
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Architecture
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Services
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Services
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../services_orchestrator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Orchestrator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2" >
        
          
          <label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Ingestion
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            Ingestion
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../services_ingestion/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ingestion_blob_data_source/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Blob
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ingestion_sharepoint_source/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sharepoint
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ingestion_nl2sql_data_source/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NL2SQL
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    How-to Guides
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            How-to Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../howto_azure_direct/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Direct Models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../howto_authentication/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Authentication and Document Security
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../howto_userfeedback/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    User Feedback
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../howto_sharepoint_connector/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sharepoint Connector
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../team/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Meet the Team
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="deployment-guide">üöÄ Deployment Guide</h1>
<p>Choose your preferred deployment method based on project requirements and environment constraints.</p>
<blockquote>
<p><strong>Note:</strong> You can change parameter values in <code>main.parameters.json</code> or set them with <code>azd env set</code> before running <code>azd provision</code>. This applies only to parameters that support environment variable substitution.</p>
</blockquote>
<h2 id="prerequisites">Prerequisites</h2>
<p><strong>Required Permissions:</strong></p>
<ul>
<li>Azure subscription with <strong>Contributor</strong> and <strong>User Access Admin</strong> roles</li>
<li>Agreement to Responsible AI terms for Azure AI Services</li>
</ul>
<p><strong>Required Tools:</strong></p>
<ul>
<li><a href="https://learn.microsoft.com/en-us/azure/developer/azure-developer-cli/install-azd">Azure Developer CLI</a></li>
<li><a href="https://learn.microsoft.com/en-us/powershell/scripting/install/installing-powershell-on-windows?view=powershell-7.4#installing-the-msi-package">PowerShell 7+</a> (Windows only)</li>
<li><a href="https://git-scm.com/downloads">Git</a></li>
<li><a href="https://www.python.org/downloads/release/python-3120/">Python 3.12</a></li>
</ul>
<h2 id="basic-deployment">Basic Deployment</h2>
<p>Quick setup for demos without network isolation.</p>
<div class="highlight"><pre><span></span><code>azd init -t azure/gpt-rag
az login
azd auth login
azd provision
</code></pre></div>
<blockquote>
<p>Add <code>--tenant</code> for <code>az</code> or <code>--tenant-id</code> for <code>azd</code> if you want a specific tenant.</p>
</blockquote>
<p>Demo video:</p>
<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; margin: 0 auto 20px auto; border-radius: 8px;">
  <iframe src="https://www.youtube.com/embed/nZMDtaDQuP4?rel=0&modestbranding=1" 
          style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; border-radius: 8px;" 
          title="GPT-RAG Tutorial" 
          frameborder="0" 
          loading="lazy"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
          allowfullscreen>
  </iframe>
</div>

<h2 id="zero-trust-deployment">Zero Trust Deployment</h2>
<p>For deployments that <strong>require network isolation</strong>.</p>
<p><strong>Before Provisioning</strong></p>
<p>Enable network isolation in your environment:</p>
<div class="highlight"><pre><span></span><code>azd env set NETWORK_ISOLATION true
</code></pre></div>
<p>Make sure you‚Äôre signed in with your Azure user account:</p>
<div class="highlight"><pre><span></span><code>az login
azd auth login
</code></pre></div>
<blockquote>
<p>Add <code>--tenant</code> for <code>az</code> or <code>--tenant-id</code> for <code>azd</code> if you want a specific tenant.</p>
</blockquote>
<p><strong>Provision Infrastructure</strong></p>
<div class="highlight"><pre><span></span><code>azd provision
</code></pre></div>
<p><strong>Post-Provision Configuration</strong></p>
<p>After provisioning completes, you'll be prompted whether your machine has VNet access.</p>
<ul>
<li>If you have VNet access:</li>
</ul>
<p>Answer <code>Y</code> when prompted. The post-provision script will run automatically and complete the configuration.</p>
<ul>
<li>If you don't have VNet access:</li>
</ul>
<p>Answer <code>N</code> when prompted. You'll need to use the provisioned Jumpbox VM to complete the post-provision steps.</p>
<p>Using the Jumpbox VM</p>
<p>1) <strong>Reset the VM password</strong> in the Azure Portal (required on first access if not set in deployment parameters):</p>
<ul>
<li>Go to your VM resource ‚Üí <strong>Support + troubleshooting</strong> ‚Üí <strong>Reset password</strong> ‚Üí Set new credentials</li>
<li>Default username is <code>testvmuser</code></li>
</ul>
<p>2) <strong>Connect via Azure Bastion</strong></p>
<p>3) <strong>Authenticate with the VM's Managed Identity:</strong></p>
<div class="highlight"><pre><span></span><code><span class="n">az</span> <span class="n">login</span> <span class="p">-</span><span class="n">-identity</span>
<span class="n">azd</span> <span class="n">auth</span> <span class="n">login</span> <span class="p">-</span><span class="n">-managed-identity</span>
</code></pre></div>
<blockquote>
<p>Add <code>--tenant</code> for <code>az</code> or <code>--tenant-id</code> for <code>azd</code> if you want a specific tenant.</p>
</blockquote>
<p>4) <strong>Run the post-provision script:</strong></p>
<p>PowerShell:
   <div class="highlight"><pre><span></span><code><span class="nb">cd </span><span class="n">c</span><span class="p">:\</span><span class="n">github</span><span class="p">\</span><span class="n">gpt-rag</span>
<span class="p">.\</span><span class="n">scripts</span><span class="p">\</span><span class="n">postProvision</span><span class="p">.</span><span class="n">ps1</span>
</code></pre></div></p>
<p>Bash:
   <div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>/mnt/c/github/gpt-rag
./scripts/postProvision.sh
</code></pre></div></p>
<blockquote>
<p><strong>Note:</strong> If you have re-initialized or cloned the gpt-rag repo again, refresh your <code>azd</code> environment before running the postProvision script so it points to the <strong>existing</strong> deployment:
<code>azd init -t azure/gpt-rag</code> then <code>azd env refresh</code>. When prompted, select the <strong>same Subscription, Resource Group, and Location</strong> as the original provisioning so <code>azd</code> correctly links to your environment.</p>
</blockquote>
<h2 id="deploy-gpt-rag-services">Deploy GPT-RAG Services</h2>
<blockquote>
<p><strong>Note:</strong> For Zero Trust deployments with network isolation, ensure you have VNet connectivity either through the Jumpbox VM or via VPN before deploying services. If using the Jumpbox VM, the repositories are located in the <code>c:\github</code> directory.</p>
</blockquote>
<p>Once the GPT-RAG infrastructure is provisioned, you can deploy the services.</p>
<p>To deploy <strong>all services at once</strong>, navigate to the <code>gpt-rag</code> directory (with azd environment configured) and run:</p>
<div class="highlight"><pre><span></span><code>azd deploy
</code></pre></div>
<p>This command deploys each service in sequence.</p>
<p>If you prefer to <strong>deploy a single service</strong>, for example, when updating only that service, you can deploy it individually. Below is an example using the orchestrator service. The same approach applies to other services (frontend, dataingest, mcp).</p>
<h3 id="deploy-individual-services">Deploy Individual Services</h3>
<p>Make sure you're logged in to Azure:</p>
<div class="highlight"><pre><span></span><code>az<span class="w"> </span>login
</code></pre></div>
<p><strong>Example: Deploying the Orchestrator</strong></p>
<p><strong>Using azd (recommended):</strong></p>
<p>Initialize the template:
<div class="highlight"><pre><span></span><code>azd<span class="w"> </span>init<span class="w"> </span>-t<span class="w"> </span>azure/gpt-rag-orchestrator<span class="w"> </span>
</code></pre></div></p>
<blockquote>
<p><strong>Important:</strong> Use the <strong>same environment name</strong> with <code>azd init</code> as in the infrastructure deployment to keep components consistent.</p>
</blockquote>
<p>Update environment variables then deploy:
<div class="highlight"><pre><span></span><code>azd<span class="w"> </span>env<span class="w"> </span>refresh
azd<span class="w"> </span>deploy<span class="w"> </span>
</code></pre></div></p>
<blockquote>
<p><strong>Important:</strong> Run <code>azd env refresh</code> with the <strong>same subscription</strong> and <strong>resource group</strong> used in the infrastructure deployment.</p>
</blockquote>
<p><strong>Using a shell script:</strong></p>
<p>Clone the repository, set the App Configuration endpoint, and run the deployment script.</p>
<p>PowerShell (Windows):
<div class="highlight"><pre><span></span><code><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">://</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="p">/</span><span class="n">Azure</span><span class="p">/</span><span class="n">gpt-rag-orchestrator</span><span class="p">.</span><span class="n">git</span>
<span class="nv">$env:APP_CONFIG_ENDPOINT</span> <span class="p">=</span> <span class="s2">&quot;https://&lt;your-app-config-name&gt;.azconfig.io&quot;</span>
<span class="nb">cd </span><span class="n">gpt-rag-orchestrator</span>
<span class="p">.\</span><span class="n">scripts</span><span class="p">\</span><span class="n">deploy</span><span class="p">.</span><span class="n">ps1</span>
</code></pre></div></p>
<p>Bash (Linux/macOS):
<div class="highlight"><pre><span></span><code>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/Azure/gpt-rag-orchestrator.git
<span class="nb">export</span><span class="w"> </span><span class="nv">APP_CONFIG_ENDPOINT</span><span class="o">=</span><span class="s2">&quot;https://&lt;your-app-config-name&gt;.azconfig.io&quot;</span>
<span class="nb">cd</span><span class="w"> </span>gpt-rag-orchestrator
./scripts/deploy.sh
</code></pre></div></p>
<h2 id="permissions">Permissions</h2>
<p><strong>Microsoft Foundry Role and AI Search Assignments</strong></p>
<table>
<thead>
<tr>
<th>Resource</th>
<th>Role</th>
<th>Assignee</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>GenAI App Search Service</td>
<td>Search Index Data Reader</td>
<td>Microsoft Foundry Project</td>
<td>Read index data</td>
</tr>
<tr>
<td>GenAI App Search Service</td>
<td>Search Service Contributor</td>
<td>Microsoft Foundry Project</td>
<td>Create AI Search connection</td>
</tr>
<tr>
<td>GenAI App Storage Account</td>
<td>Storage Blob Data Reader</td>
<td>Microsoft Foundry Project</td>
<td>Read blob data</td>
</tr>
<tr>
<td>Microsoft Foundry Account</td>
<td>Cognitive Services User</td>
<td>Search Service</td>
<td>Allow Search Service to access vectorizers</td>
</tr>
</tbody>
</table>
<p><strong>Container App Role Assignments</strong></p>
<table>
<thead>
<tr>
<th>Resource</th>
<th>Role</th>
<th>Assignee</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>GenAI App Configuration Store</td>
<td>App Configuration Data Reader</td>
<td>ContainerApp: orchestrator</td>
<td>Read configuration data</td>
</tr>
<tr>
<td>GenAI App Configuration Store</td>
<td>App Configuration Data Reader</td>
<td>ContainerApp: frontend</td>
<td>Read configuration data</td>
</tr>
<tr>
<td>GenAI App Configuration Store</td>
<td>App Configuration Data Reader</td>
<td>ContainerApp: dataingest</td>
<td>Read configuration data</td>
</tr>
<tr>
<td>GenAI App Configuration Store</td>
<td>App Configuration Data Reader</td>
<td>ContainerApp: mcp</td>
<td>Read configuration data</td>
</tr>
<tr>
<td>GenAI App Container Registry</td>
<td>AcrPull</td>
<td>ContainerApp: orchestrator</td>
<td>Pull container images</td>
</tr>
<tr>
<td>GenAI App Container Registry</td>
<td>AcrPull</td>
<td>ContainerApp: frontend</td>
<td>Pull container images</td>
</tr>
<tr>
<td>GenAI App Container Registry</td>
<td>AcrPull</td>
<td>ContainerApp: dataingest</td>
<td>Pull container images</td>
</tr>
<tr>
<td>GenAI App Container Registry</td>
<td>AcrPull</td>
<td>ContainerApp: mcp</td>
<td>Pull container images</td>
</tr>
<tr>
<td>GenAI App Key Vault</td>
<td>Key Vault Secrets User</td>
<td>ContainerApp: orchestrator</td>
<td>Read secrets</td>
</tr>
<tr>
<td>GenAI App Key Vault</td>
<td>Key Vault Secrets User</td>
<td>ContainerApp: frontend</td>
<td>Read secrets</td>
</tr>
<tr>
<td>GenAI App Key Vault</td>
<td>Key Vault Secrets User</td>
<td>ContainerApp: dataingest</td>
<td>Read secrets</td>
</tr>
<tr>
<td>GenAI App Key Vault</td>
<td>Key Vault Secrets User</td>
<td>ContainerApp: mcp</td>
<td>Read secrets</td>
</tr>
<tr>
<td>GenAI App Search Service</td>
<td>Search Index Data Reader</td>
<td>ContainerApp: orchestrator</td>
<td>Read index data</td>
</tr>
<tr>
<td>GenAI App Search Service</td>
<td>Search Index Data Contributor</td>
<td>ContainerApp: dataingest</td>
<td>Read/write index data</td>
</tr>
<tr>
<td>GenAI App Search Service</td>
<td>Search Index Data Contributor</td>
<td>ContainerApp: mcp</td>
<td>Read/write index data</td>
</tr>
<tr>
<td>GenAI App Storage Account</td>
<td>Storage Blob Data Reader</td>
<td>ContainerApp: orchestrator</td>
<td>Read blob data</td>
</tr>
<tr>
<td>GenAI App Storage Account</td>
<td>Storage Blob Data Reader</td>
<td>ContainerApp: frontend</td>
<td>Read blob data</td>
</tr>
<tr>
<td>GenAI App Storage Account</td>
<td>Storage Blob Data Contributor</td>
<td>ContainerApp: dataingest</td>
<td>Read/write blob data</td>
</tr>
<tr>
<td>GenAI App Storage Account</td>
<td>Storage Blob Data Contributor</td>
<td>ContainerApp: mcp</td>
<td>Read/write blob data</td>
</tr>
<tr>
<td>GenAI App Cosmos DB</td>
<td>Cosmos DB Built-in Data Contributor</td>
<td>ContainerApp: orchestrator</td>
<td>Read/write Cosmos DB data</td>
</tr>
<tr>
<td>Microsoft Foundry Account</td>
<td>Cognitive Services User</td>
<td>ContainerApp: orchestrator</td>
<td>Access Cognitive Services</td>
</tr>
<tr>
<td>Microsoft Foundry Account</td>
<td>Cognitive Services User</td>
<td>ContainerApp: dataingest</td>
<td>Access Cognitive Services</td>
</tr>
<tr>
<td>Microsoft Foundry Account</td>
<td>Cognitive Services User</td>
<td>ContainerApp: mcp</td>
<td>Access Cognitive Services</td>
</tr>
<tr>
<td>Microsoft Foundry Account</td>
<td>Cognitive Services OpenAI User</td>
<td>ContainerApp: orchestrator</td>
<td>Use OpenAI APIs</td>
</tr>
<tr>
<td>Microsoft Foundry Account</td>
<td>Cognitive Services OpenAI User</td>
<td>ContainerApp: dataingest</td>
<td>Use OpenAI APIs</td>
</tr>
<tr>
<td>Microsoft Foundry Account</td>
<td>Cognitive Services OpenAI User</td>
<td>ContainerApp: mcp</td>
<td>Use OpenAI APIs</td>
</tr>
</tbody>
</table>
<p><strong>Executor Role Assignments</strong></p>
<table>
<thead>
<tr>
<th>Resource</th>
<th>Role</th>
<th>Assignee</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>GenAI App Configuration Store</td>
<td>App Configuration Data Owner</td>
<td>Executor</td>
<td>Full control over configuration settings</td>
</tr>
<tr>
<td>GenAI App Container Registry</td>
<td>AcrPush</td>
<td>Executor</td>
<td>Push container images</td>
</tr>
<tr>
<td>GenAI App Container Registry</td>
<td>AcrPull</td>
<td>Executor</td>
<td>Pull container images</td>
</tr>
<tr>
<td>GenAI App Key Vault</td>
<td>Key Vault Contributor</td>
<td>Executor</td>
<td>Manage Key Vault settings</td>
</tr>
<tr>
<td>GenAI App Key Vault</td>
<td>Key Vault Secrets Officer</td>
<td>Executor</td>
<td>Create Key Vault secrets</td>
</tr>
<tr>
<td>GenAI App Search Service</td>
<td>Search Service Contributor</td>
<td>Executor</td>
<td>Create/update search service elements</td>
</tr>
<tr>
<td>GenAI App Search Service</td>
<td>Search Index Data Contributor</td>
<td>Executor</td>
<td>Read/write search index data</td>
</tr>
<tr>
<td>GenAI App Search Service</td>
<td>Search Index Data Reader</td>
<td>Executor</td>
<td>Read index data</td>
</tr>
<tr>
<td>GenAI App Storage Account</td>
<td>Storage Blob Data Contributor</td>
<td>Executor</td>
<td>Read/write blob data</td>
</tr>
<tr>
<td>GenAI App Cosmos DB</td>
<td>Cosmos DB Built-in Data Contributor</td>
<td>Executor</td>
<td>Read/write Cosmos DB data</td>
</tr>
<tr>
<td>Microsoft Foundry Account</td>
<td>Cognitive Services OpenAI User</td>
<td>Executor</td>
<td>Use OpenAI APIs</td>
</tr>
</tbody>
</table>
<p><strong>Jumpbox VM Role Assignments</strong></p>
<table>
<thead>
<tr>
<th>Resource</th>
<th>Role</th>
<th>Assignee</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>GenAI App Container Apps</td>
<td>Container Apps Contributor</td>
<td>Jumpbox VM</td>
<td>Full control over Container Apps</td>
</tr>
<tr>
<td>Azure Managed Identity</td>
<td>Managed Identity Operator</td>
<td>Jumpbox VM</td>
<td>Assign and manage user-assigned identities</td>
</tr>
<tr>
<td>GenAI App Container Registry</td>
<td>Container Registry Repository Writer</td>
<td>Jumpbox VM</td>
<td>Write to ACR repositories</td>
</tr>
<tr>
<td>GenAI App Container Registry</td>
<td>Container Registry Tasks Contributor</td>
<td>Jumpbox VM</td>
<td>Manage ACR tasks</td>
</tr>
<tr>
<td>GenAI App Container Registry</td>
<td>Container Registry Data Access Configuration Administrator</td>
<td>Jumpbox VM</td>
<td>Manage ACR data access configuration</td>
</tr>
<tr>
<td>GenAI App Container Registry</td>
<td>AcrPush</td>
<td>Jumpbox VM</td>
<td>Push container images</td>
</tr>
<tr>
<td>GenAI App Configuration Store</td>
<td>App Configuration Data Owner</td>
<td>Jumpbox VM</td>
<td>Full control over configuration settings</td>
</tr>
<tr>
<td>GenAI App Key Vault</td>
<td>Key Vault Contributor</td>
<td>Jumpbox VM</td>
<td>Manage Key Vault settings</td>
</tr>
<tr>
<td>GenAI App Key Vault</td>
<td>Key Vault Secrets Officer</td>
<td>Jumpbox VM</td>
<td>Create Key Vault secrets</td>
</tr>
<tr>
<td>GenAI App Search Service</td>
<td>Search Service Contributor</td>
<td>Jumpbox VM</td>
<td>Create/update search service elements</td>
</tr>
<tr>
<td>GenAI App Search Service</td>
<td>Search Index Data Contributor</td>
<td>Jumpbox VM</td>
<td>Read/write search index data</td>
</tr>
<tr>
<td>GenAI App Storage Account</td>
<td>Storage Blob Data Contributor</td>
<td>Jumpbox VM</td>
<td>Read/write blob data</td>
</tr>
<tr>
<td>GenAI App Cosmos DB</td>
<td>Cosmos DB Built-in Data Contributor</td>
<td>Jumpbox VM</td>
<td>Read/write Cosmos DB data</td>
</tr>
<tr>
<td>Microsoft Foundry Account</td>
<td>Cognitive Services Contributor</td>
<td>Jumpbox VM</td>
<td>Manage Cognitive Services resources</td>
</tr>
<tr>
<td>Microsoft Foundry Account</td>
<td>Cognitive Services OpenAI User</td>
<td>Jumpbox VM</td>
<td>Use OpenAI APIs</td>
</tr>
</tbody>
</table>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <div style="
  background-color: var(--md-primary-fg-color);
  color: var(--md-primary-bg-color);
  text-align: center;
  font-size: 0.95em;
  padding: 1em 0;
">
  ¬© 2025 GPT-RAG ‚Äî powered by ‚ù§Ô∏è and coffee ‚òï
</div>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.icon", "content.iconify", "navigation.tracking", "toc.integrate", "content.code.annotate", "navigation.top"], "search": "../assets/javascripts/workers/search.07f07601.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.56dfad97.min.js"></script>
      
    
  </body>
</html>