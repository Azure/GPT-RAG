{
  "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentParameters.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {

    "environmentName":                     { "value": "${AZURE_ENV_NAME}" },
    "location":                            { "value": "${AZURE_LOCATION}" },
    "deploymentTags":                      { "value": {"project": "TestProject"} },
    "principalId":                         { "value": "${AZURE_PRINCIPAL_ID}" },
    "networkIsolation":                    { "value": "false" },  

    "deployAiFoundry":                     { "value": "true" },    
    "deployAiFoundryStorageAccount":       { "value": "true" },
    "deployAiFoundryKeyVault":             { "value": "true" },
    "deployAiFoundrySearchService":        { "value": "true" },        
    "deployAiFoundryCosmosDb":             { "value": "true" },
    "deployGroundingWithBing":             { "value": "true" },    
    "deployAppConfig":                     { "value": "true" },
    "deployKeyVault":                      { "value": "true" },
    "deployLogAnalytics":                  { "value": "true" },
    "deployAppInsights":                   { "value": "true" },
    "deploySearchService":                 { "value": "true" },
    "deployStorageAccount":                { "value": "true" },
    "deployCosmosDb":                      { "value": "true" },
    "deployContainerApps":                 { "value": "true" },
    "deployContainerRegistry":             { "value": "true" },
    "deployContainerEnv":                  { "value": "true" },

    "aiFoundryAccountName":                  { "value": null },
    "aiFoundryProjectName":                  { "value": null },
    "aiFoundryProjectDisplayName":           { "value": null },
    "aiFoundryProjectDescription":           { "value": null },    
    "aiFoundryStorageAccountName":           { "value": null },
    "aiFoundryKeyVaultName":                 { "value": null },
    "aiFoundrySearchServiceName":            { "value": null },
    "aiFoundryCosmosDbName":                 { "value": null },
    "bingSearchName":                        { "value": null },  
    "appConfigName":                         { "value": null },
    "appInsightsName":                       { "value": null },
    "containerEnvName":                      { "value": null },
    "containerRegistryName":                 { "value": null },
    "conversationContainerName":             { "value": null },
    "dataIngestContainerAppName":            { "value": null },
    "datasourcesContainerName":              { "value": null },
    "dbAccountName":                         { "value": null },
    "dbDatabaseName":                        { "value": null },
    "frontEndContainerAppName":              { "value": null },
    "keyVaultName":                          { "value": null },
    "logAnalyticsWorkspaceName":             { "value": null },
    "orchestratorContainerAppName":          { "value": null },
    "searchServiceName":                     { "value": null },
    "solutionStorageAccountName":            { "value": null },

    "useCMK":                                { "value": "false" },        
    "keyName":                               { "value": null },
    "keyVersion":                            { "value": null },

    "modelDeploymentList":{
      "value": [
        {
          "name": "chat",
          "model": "gpt-4o-mini",
          "modelFormat": "OpenAI",          
          "type": "GlobalStandard",
          "version": "2024-07-18",          
          "capacity": 40,
          "internal_name": "AZURE_CHAT_DEPLOYMENT_NAME"
        },
        {
          "name": "text-embedding",
          "model": "text-embedding-3-large",
          "modelFormat": "OpenAI",
          "type": "Standard",
          "version": "1",          
          "capacity": 40,
          "internal_name": "AZURE_EMBEDDING_DEPLOYMENT_NAME"
        }
      ]
    },

    "containerAppsList": {
      "value": [
        {
          "name": null,
          "service_name": "orchestrator",
          "min_replicas": 1,
          "max_replicas": 1,
          "internal_name": "orchestrator",
          "roles": [
            "App Configuration Data Reader",
            "Cognitive Services User",
            "Cognitive Services OpenAI User",
            "AcrPull",
            "Cosmos DB Built-in Data Contributor",
            "Search Index Data Reader",
            "Storage Blob Data Reader",
            "Key Vault Secrets User"
          ]
        },
        {
          "name": null,
          "service_name": "frontend",
          "min_replicas": 1,
          "max_replicas": 1,
          "internal_name": "frontend",          
          "roles": [
            "App Configuration Data Reader",
            "AcrPull",
            "Storage Blob Data Reader",
            "Key Vault Secrets User"
          ]
        },
        {
          "name": null,
          "service_name": "dataingest",
          "min_replicas": 1,
          "max_replicas": 1,
          "internal_name": "dataIngest",
          "roles": [
            "App Configuration Data Reader",
            "Azure Machine Learning Workspace Connection Secrets Reader",
            "Cognitive Services User",
            "Cognitive Services OpenAI User",
            "AcrPull",
            "Search Index Data Contributor",
            "Storage Blob Data Contributor",
            "Key Vault Secrets User"
          ]
        }
      ]
    },

    "storageAccountContainersList": {
      "value": [
        {
          "name": "documents-images"
        },
        {
          "name": "documents"
        },
        {
          "name": "nl2sql"
        }
      ]
    },  

    "databaseContainersList": {
      "value": [
        {
          "name": "conversations"
        },
        {
          "name": "datasources"
        }
      ]
    }    
    
  }
}
